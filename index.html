<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hypper-Drive-2 Launcher</title>
<style>
  body {
    margin: 0;
    padding: 20px;
    font-family: Arial, sans-serif;
    background: #121212;
    color: #fff;
  }
  h1, h2 { text-align: center; }
  .game-list, .type-list {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: 20px;
  }
  .game-item {
    background: #1e1e1e;
    border-radius: 12px;
    padding: 10px;
    margin: 10px;
    width: 180px;
    text-align: center;
    cursor: pointer;
    transition: transform 0.2s;
  }
  .game-item:hover { transform: scale(1.05); }
  .game-item img { width: 100%; border-radius: 8px; }
  iframe { width: 100%; height: 100vh; border: none; }
</style>
</head>
<body>
<h1>Hypper-Drive-2 Launcher</h1>
<h2 id="subtitle">Loading...</h2>
<div id="content"></div>

<script>
async function router() {
  // fetch the JSON remotely
  const zones = await fetch("https://raw.githubusercontent.com/GLITCHED-OVERRIDE/Hypper-Drive-2/refs/heads/main/Games/Zones.json")
    .then(r => r.json())
    .catch(e => { document.body.innerHTML = "<h1>Error loading game data</h1>"; console.error(e); return []; });

  const content = document.getElementById("content");
  const subtitle = document.getElementById("subtitle");

  const parts = window.location.pathname.split("/").filter(Boolean);

  // Home page → list types
  if (parts.length === 0 || (parts.length === 1 && parts[0] === "Games")) {
    subtitle.textContent = "Select a game type:";
    const types = [...new Set(zones.map(g => g.type))];
    const container = document.createElement("div");
    container.className = "type-list";
    types.forEach(t => {
      const div = document.createElement("div");
      div.className = "game-item";
      div.textContent = t;
      div.onclick = () => window.location.href = `/Games/${t}`;
      container.appendChild(div);
    });
    content.appendChild(container);
    return;
  }

  // /Games/[type] → list games
  if (parts.length === 2 && parts[0] === "Games") {
    const type = parts[1];
    const games = zones.filter(g => g.type === type);
    if (!games.length) { subtitle.textContent = "No games found in this type"; return; }
    subtitle.textContent = `Games in ${type}:`;
    const container = document.createElement("div");
    container.className = "game-list";
    games.forEach(g => {
      const div = document.createElement("div");
      div.className = "game-item";
      div.innerHTML = `<img src="${g.cover}" alt="${g.name}"><br>${g.name}`;
      div.onclick = () => window.location.href = `/Games/${type}/${encodeURIComponent(g.name)}`;
      container.appendChild(div);
    });
    content.appendChild(container);
    return;
  }

  // /Games/[type]/[name] → load iframe
  if (parts.length === 3 && parts[0] === "Games") {
    const type = parts[1];
    const name = decodeURIComponent(parts[2]);
    const game = zones.find(g => g.type === type && g.name.toLowerCase() === name.toLowerCase());
    if (!game) { subtitle.textContent = "Game Not Found"; return; }

    // favicon
    const link = document.createElement("link");
    link.rel = "icon";
    link.href = game.cover;
    document.head.appendChild(link);

    subtitle.textContent = game.name;
    const iframe = document.createElement("iframe");
    iframe.src = game.url;
    content.appendChild(iframe);
    return;
  }

  // fallback 404
  subtitle.textContent = "404 – Page Not Found";
}

router();
</script>
</body>
</html>
