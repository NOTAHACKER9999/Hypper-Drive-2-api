<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hypper-Drive-2 Launcher</title>
</head>
<body>
<script>
async function router() {
  const parts = window.location.pathname.split("/").filter(Boolean);

  // /Games/[type]/[name] → fetch HTML content
  if (parts.length === 3 && parts[0] === "Games") {
    const type = parts[1];
    const name = decodeURIComponent(parts[2]);

    const zones = await fetch("/api/games").then(r => r.json());
    const game = zones.find(g => g.type === type && g.name.toLowerCase() === name.toLowerCase());

    if (!game) {
      document.body.innerHTML = "<h1>Game not found</h1>";
      return;
    }

    // Favicon
    const link = document.createElement("link");
    link.rel = "icon";
    link.href = game.cover;
    document.head.appendChild(link);

    // Fetch HTML and run full-screen
    const html = await fetch(game.url).then(r => r.text());
    document.open();
    document.write(html);
    document.close();
    return;
  }

  // Fallback 404
  document.body.innerHTML = "<h1>404 – Page Not Found</h1>";
}

router();
</script>
</body>
</html>
